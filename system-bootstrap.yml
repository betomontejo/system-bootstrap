---
- hosts: localhost

  tasks:

    - name : "Add PPA keys"
      apt_key:
        url: "{{ item }}"
      become: true
      with_items:
        - "https://dl-ssl.google.com/linux/linux_signing_key.pub"
        - "https://download.docker.com/linux/ubuntu/gpg"
      become: true

    - name: "Add PPA repoistories"
      apt_repository: 
        repo: "{{ item }}"
        state: present
      become: true
      with_items: 
        - "ppa:git-core/ppa"
        - "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main"
        - "deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable"

    - name: "Update APT cache"
      apt:
        update_cache: yes
      become: true

    - name: "Install APT packages"
      apt:
        pkg: "{{ item }}"
      with_items:
        - "zip"
        - "unzip"
        - "git"
        - "google-chrome-stable"
        - "docker-ce"
      become: true

    - name: "Install SDKMAN!"
      shell: curl -s "https://get.sdkman.io" | bash
 
    - name: "Install SDKMAN candiates"
      shell: |
          set -e
          source ~/.sdkman/bin/sdkman-init.sh
          sdk install {{ item }}
      args:
        executable: "/bin/bash"
      with_items: 
       - java
       - gradle
       - sbt
       - scala
       - groovy

    - name: "Download IntelliJ IDEA"
      get_url: 
        url: "https://download.jetbrains.com/idea/ideaIC-2017.1.2.tar.gz"
        sha256sum: "0a22794a7c7d8a97e0b179923bffa5311046bc0db2bc330e23abde24b6340f8b"
        dest: "~/"

    - name: "Unarchive IntelliJ IDEA"
      unarchive:
        src: "~/ideaIC-2017.1.2.tar.gz"
        dest: "~/"
      
