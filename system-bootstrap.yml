---
- hosts: localhost

  tasks:

    - name: "Add GIT PPA repoistory"
      apt_repository: 
        repo: "ppa:git-core/ppa"
        state: present
      become: true

    - name: "Update APT cache"
      apt:
        update_cache: yes
      become: true

    - name: "Install APT packages"
      apt:
        pkg: "{{ item }}"
      with_items:
        - zip
        - unzip
        - git
      become: true

    - name: "Install SDKMAN!"
      shell: curl -s "https://get.sdkman.io" | bash
 
    - name: "Install SDKMAN candiates"
      shell: |
          set -e
          source ~/.sdkman/bin/sdkman-init.sh
          sdk install {{ item }}
      args:
        executable: "/bin/bash"
      with_items: 
       - java

    - name: "Download IntelliJ IDEA"
      get_url: 
        url: "https://download.jetbrains.com/idea/ideaIC-2017.1.2.tar.gz"
        sha256sum: "0a22794a7c7d8a97e0b179923bffa5311046bc0db2bc330e23abde24b6340f8b"
        dest: "~/"

    - name: "Unarchive IntelliJ IDEA"
      unarchive:
        src: "~/ideaIC-2017.1.2.tar.gz"
        dest: "~/"
      
